        -:    0:Source:unittest2.c
        -:    0:Graph:unittest2.gcno
        -:    0:Data:unittest2.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:#include "dominion.h"
        -:    2:#include "dominion_helpers.h"
        -:    3:#include <string.h>
        -:    4:#include <stdio.h>
        -:    5:#include "rngs.h"
        -:    6:
        -:    7://fails and tests counters
        -:    8:int failureCount = 0;
        -:    9:int testCount = 0;
        -:   10:
        -:   11://replaces c assert
function assertTrue called 3 returned 100% blocks executed 80%
        -:   12:void assertTrue(int a, int b) {
        3:   13:    if (a == b) {
branch  0 taken 100%
branch  1 taken 0%
        3:   14:        printf("PASSED\n");
        3:   15:        testCount++;
        3:   16:    }
        -:   17:    else {
    #####:   18:        printf("FAILED\n");
    #####:   19:        failureCount++;
    #####:   20:        testCount++;
        -:   21:    }
        3:   22:}
        -:   23:
        -:   24://starts tests
function main called 1 returned 100% blocks executed 80%
        -:   25:int main () {
        -:   26:    
        -:   27:    //sets up game
        1:   28:    int numPlayers = 2;
        -:   29:
        1:   30:    int k[10] = {adventurer, council_room, feast, gardens, mine,
        -:   31:               remodel, smithy, village, baron, great_hall};
        1:   32:    int seed = 2000;
        -:   33:    struct gameState state;
        -:   34:
        1:   35:    printf("Starting tests for isGameOver()...\n");
        -:   36:
        1:   37:    memset(&state,23,sizeof(struct gameState));
        1:   38:    initializeGame(numPlayers, k, seed, &state);
        -:   39:
        1:   40:    state.supplyCount[province] = 0;
        -:   41:
        1:   42:    printf("\nTEST: Province cards empty\n");
        1:   43:    printf("Actual: %d\n",isGameOver(&state));
        1:   44:    printf("Expected: %d\n",1);
        1:   45:    assertTrue(isGameOver(&state),1);
        -:   46:
        1:   47:    state.supplyCount[province] = 1;
        -:   48:
        1:   49:    state.supplyCount[0] = 0;
        1:   50:    state.supplyCount[1] = 0;
        1:   51:    state.supplyCount[2] = 0;
        -:   52:
        1:   53:    printf("\nTEST: Three supply piles empty\n");
        1:   54:    printf("Actual: %d\n",isGameOver(&state));
        1:   55:    printf("Expected: %d\n",1);
        1:   56:    assertTrue(isGameOver(&state),1);
        -:   57:
        1:   58:    state.supplyCount[0] = 1;
        1:   59:    state.supplyCount[1] = 1;
        1:   60:    state.supplyCount[2] = 1;
        -:   61:
        1:   62:    printf("\nTEST: Province cards not empty\n");
        1:   63:    printf("\nTEST: Three supply piles not empty\n");
        1:   64:    printf("Actual: %d\n",isGameOver(&state));
        1:   65:    printf("Expected: %d\n",0);
        1:   66:    assertTrue(isGameOver(&state),0);
        -:   67:
        1:   68:    if (failureCount) {
branch  0 taken 0%
branch  1 taken 100%
    #####:   69:        printf("\nTEST(S) FAILED\n");
    #####:   70:        printf("%d of %d tests failed!\n",failureCount,testCount);
    #####:   71:    }
        -:   72:    else {
        1:   73:        printf("\nTESTS SUCCESSFULLY COMPLETED\n\n");
        -:   74:    }
        -:   75:
        1:   76:    return 0;
        -:   77:}
